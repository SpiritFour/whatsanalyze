(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{1e3:function(e,t,n){"use strict";n.r(t);var r=n(330),o=(n(17),n(28)),d=(n(84),n(37),n(76),n(295),n(53),n(348),n(1008),n(1009),n(1010),n(1011),n(1012),n(1013),n(1014),n(1015),n(1016),n(1017),n(1018),n(1019),n(1020),n(1021),n(1022),n(1023),n(1024),n(1025),n(1026),n(1027),n(1028),n(1029),n(1030),n(1031),n(1032),n(345),n(52),n(81),n(123),n(95),n(56),n(980)),c=n(981),l=n.n(c),f=n(657),h={name:"FileHandler",data:function(){return{isDragging:!1,wrongFile:!1,processing:!1,isSuccess:!1,attachments:{}}},methods:{extendDataStructure:function(e){var t={};e.messages.forEach((function(object,e){object.author in t?t[object.author]+=1:t[object.author]=0,object.absolute_id=e,object.personal_id=t[object.author]}))},zipLoadEndHandler:function(e){var t=this,n=e.target.result;(new l.a).loadAsync(n).then((function(e){var n=t.getChatFile(e);return Object(d.parseString)(n,{parseAttachments:!0}).then((function(t){return{messages:t,attachments:Object.values(e.files).map((function(e){return{name:e.name,compressedContent:e._data.compressedContent}}))}}))})).then(this.updateMessages)},getChatFile:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.file("_chat.txt"))){t.next=3;break}return t.abrupt("return",n.async("string"));case 3:return t.next=5,e.file(/.*(?:chat|whatsapp).*\.txt$/i).sort((function(a,b){return a.name.length-b.name.length}))[0].async("string");case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))()},readFileAsArrayBuffer:function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){return t(new Uint8Array(r.result))},r.onerror=n,r.readAsArrayBuffer(e)}))},readSharedFiles:function(e){var t=this;var n=function(e){var t=new RegExp(/.*(?:chat|whatsapp).*\.txt$/i);return e.find((function(e){return t.test(e.name)}))}(e=Array.from(e));if(void 0!==n){var r=new FileReader;r.addEventListener("loadend",(function(n){Object(d.parseString)(n.target.result,{parseAttachments:!0}).then(function(){var n=Object(o.a)(regeneratorRuntime.mark((function n(r){var d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d=[],n.next=3,e.forEach(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readFileAsArrayBuffer(n);case 2:r=e.sent,d.push({name:n.name,decompressedData:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:t.updateMessages({messages:r,attachments:d});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})),r.readAsText(n)}else this.showErrorMessage()},txtLoadEndHandler:function(e){var t=this;Object(d.parseString)(e.target.result).then((function(e){return t.updateMessages({messages:e})}))},updateMessages:function(e){this.extendDataStructure(e),this.$emit("new_messages",e),this.$emit("hide_explanation",!0),this.processing=!1,this.isSuccess=!0,Object(f.i)("parsed",f.a)},showErrorMessage:function(){var text=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.wrongFile=!0,this.processing=!1,this.isSuccess=!1,Object(f.i)("error"+(text||""),f.a,0)},processFileList:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isDragging=!1,this.processing=!0,this.isSuccess=!1,this.wrongFile=!1,t||e.length>1)this.readSharedFiles(e);else{var n=e[0];if(!n)return this.showErrorMessage("_undefined_shared_file");var r=new FileReader;/^application\/(?:x-)?zip(?:-compressed)?$/.test(n.type)?(r.addEventListener("loadend",this.zipLoadEndHandler),r.readAsArrayBuffer(n)):"text/plain"===n.type?(r.addEventListener("loadend",this.txtLoadEndHandler),r.readAsText(n)):this.showErrorMessage()}},dragOver:function(){this.isDragging=!0},dragLeave:function(){this.isDragging=!1},drop:function(e){var t=e.dataTransfer.files;this.processFileList(t)},requestUploadFile:function(){var e=this.$el.querySelector("#uploadmytextfile").files;this.processFileList(e)}}},v=h,m=(n(982),n(99)),component=Object(m.a)(v,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"file-handler pa-md-0",on:{dragover:function(t){return t.preventDefault(),e.dragOver.apply(null,arguments)},dragleave:function(t){return t.preventDefault(),e.dragLeave.apply(null,arguments)},drop:function(t){return t.preventDefault(),e.drop(t)}}},[t("div",{staticClass:"drop-container"},[t("label",{staticStyle:{cursor:"pointer"},attrs:{for:"uploadmytextfile"}},[t("div",{staticClass:"drop pa-3",class:{isDragging:e.isDragging,smallFont:e.$vuetify.breakpoint.smAndDown,isSuccess:e.isSuccess}},[t("input",{attrs:{id:"uploadmytextfile",multiple:"",type:"file",accept:".txt, .zip"},on:{change:e.requestUploadFile}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.wrongFile,expression:"wrongFile"}],staticClass:"text-body-1 text-md-h6 text-xl-h5 w-100",domProps:{innerHTML:e._s(e.$t("fileWrong"))}}),e._v(" "),e.isDragging?t("div",{staticClass:"w-100 h-100"},[t("br"),e._v("\n          "+e._s(e.$t("fileDrop"))+"\n        ")]):e._e(),e._v(" "),e.isDragging||e.wrongFile||e.processing?e._e():t("div",{staticClass:"text-body-1 text-md-h6 text-xl-h5 w-100 h-100"},[e.isSuccess?e._e():t(r.a,{attrs:{size:"2em"}},[e._v("mdi-file")]),e._v(" "),t("div",{class:{"text-caption":e.isSuccess}},[e.isSuccess?t("div",{domProps:{innerHTML:e._s(e.$t("fileDone"))}}):e._e(),e._v(" "),e.$vuetify.breakpoint.mdAndUp?t("span",{domProps:{innerHTML:e._s(e.$t("fileSuccess"))}}):e._e(),e._v(" "),e.$vuetify.breakpoint.smAndDown?t("span",{domProps:{innerHTML:e._s(e.$t("fileSelect"))}}):e._e(),e._v(" "),e.isSuccess?t("span",{domProps:{innerHTML:e._s(e.$t("fileAnother"))}}):e._e(),e._v(" "),e.isSuccess?e._e():t("span",{domProps:{innerHTML:e._s(e.$t("fileZip"))}})])],1),e._v(" "),t("br"),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.processing,expression:"processing"}],staticClass:"text-body-1 text-md-h6 text-xl-h5 w-100 overflow-hidden"},[t("div",{staticClass:"loading"}),e._v(" "),t("br"),e._v(" "),t("span",{domProps:{innerHTML:e._s(e.$t("fileProcessing"))}})])])])])])}),[],!1,null,"b6f656a0",null);t.default=component.exports},657:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"h",(function(){return d})),n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"e",(function(){return m})),n.d(t,"i",(function(){return x}));var r="home",o="file",d="results",c="pdf",l="payment",f="install",h="lead",v="interaction",m="num_persons";function x(e,label){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1";window.$nuxt.$gtag.event(label+"_"+e,{event_category:r,event_label:label,value:String(t)})}},917:function(e,t,n){var content=n(983);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(48).default)("bd143898",content,!0,{sourceMap:!1})},982:function(e,t,n){"use strict";n(917)},983:function(e,t,n){var r=n(47)((function(i){return i[1]}));r.push([e.i,".top-color[data-v-b6f656a0]{background-color:#21a68d}.only-visible-to-html2canvas[data-v-b6f656a0]{display:none}.cta[data-v-b6f656a0]{background:#f2f2f2;width:100%}.btn-color[data-v-b6f656a0]{background-color:#21a68d!important}.btn-color-dark[data-v-b6f656a0]{background-color:#00535f!important}.link[data-v-b6f656a0]{border:none;color:#069;cursor:pointer;font-family:arial,sans-serif;-webkit-text-decoration:underline;text-decoration:underline}.w-100[data-v-b6f656a0]{width:100%}.smallFont p[data-v-b6f656a0]{font-size:1.1em!important}.file-handler[data-v-b6f656a0]{background:#21a68d;text-align:center}.drop-container[data-v-b6f656a0]{background-color:#60d8bd;border-radius:10px;padding:10px}.drop[data-v-b6f656a0]{align-items:center;border:2px dashed rgba(0,0,0,.3);border-radius:10px;color:#000;display:flex;justify-items:center}@keyframes attention-b6f656a0{0%{box-shadow:2px 2px 20px #000}50%{box-shadow:none}to{box-shadow:2px 2px 20px #000}}textarea[data-v-b6f656a0]{height:100%;-o-object-fit:contain;object-fit:contain;resize:none;width:100%}input[type=file][data-v-b6f656a0]{display:none}.isDragging[data-v-b6f656a0]{background:#022e40;border-style:solid;box-shadow:0 0 40px #000!important;color:#21a68d!important;text-shadow:#7fff00}.isSuccess[data-v-b6f656a0]{animation-duration:2s;animation-iteration-count:1;animation-name:done-b6f656a0}@keyframes done-b6f656a0{0%{background:#21a68d}50%{background:#adff2f}to{background:#21a68d}}",""]),r.locals={},e.exports=r}}]);