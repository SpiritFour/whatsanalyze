{"version":3,"sources":["webpack:///./components/SubscriptionChecker.vue","webpack:///./components/SubscriptionChecker.vue?036d","webpack:///./components/SubscriptionChecker.vue?0417"],"names":["props","data","subscription_id","isValid","subscriptionData","APIinterval","maxCounter","isEmailValid","watch","id","this","checkSubscription","email","methods","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","abrupt","subscriptionId","loadSubscription","setInterval","clearInterval","$emit","stop","_this2","_callee2","response","_context2","console","log","$fire","functions","httpsCallable","_objectSpread","client_id","$config","paypalClientId","sent","localStorage","setItem","JSON","stringify","component","_c","_self"],"mappings":"kGAAA,I,+oBAEe,ICF6f,EDE7f,CACbA,MAAO,CAAC,QAAS,MACjBC,KAAI,WACF,MAAO,CACLC,gBAAiB,KACjBC,QAAS,KACTC,iBAAkB,KAClBC,YAAa,KACbC,WAAY,EACZC,aAAc,KAElB,EACAC,MAAO,CACLC,GAAE,WACAC,KAAKC,mBACP,EACAC,MAAK,WACHF,KAAKC,mBACP,GAEFE,QAAS,CACDF,kBAAiB,WAAG,IAAAG,EAAA,YAAAC,YAAAC,mBAAAC,MAAA,SAAAC,IAAA,IAAAjB,KAAA,OAAAe,mBAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAEnBR,EAAKF,OAAUE,EAAKL,GAAE,CAAAW,EAAAE,KAAA,eAAAF,EAAAG,OAAA,iBAS1B,OALGtB,KAAO,CAAC,EAEVA,KADEa,EAAKL,GACA,CAAEe,eAAgBV,EAAKL,IAEvB,CAAEG,MAAOE,EAAKF,OACtBQ,EAAAE,KAAA,EAEKR,EAAKW,iBAAiBxB,MAAK,OAEjCa,EAAKT,YAAcqB,aAAY,WAE7B,GAAIZ,EAAKX,SAAWW,EAAKR,WAAa,GAMpC,OALAqB,cAAcb,EAAKT,kBAEdS,EAAKX,SACRW,EAAKc,MAAM,cAIfd,EAAKW,iBAAiBxB,MACtBa,EAAKR,YACP,GAAG,KAAU,wBAAAc,EAAAS,OAAA,GAAAX,EAAA,IA3BWH,EA4B1B,EACMU,iBAAgB,SAACxB,MAAM,IAAA6B,EAAA,YAAAf,YAAAC,mBAAAC,MAAA,SAAAc,IAAA,IAAAC,EAAA,OAAAhB,mBAAAG,MAAA,SAAAc,GAAA,cAAAA,EAAAZ,KAAAY,EAAAX,MAAA,OAEE,OAA7BY,QAAQC,IAAI,UAAWlC,MAAMgC,EAAAX,KAAA,EACNQ,EAAKM,MAAMC,UAAUC,cAC1C,wBADqBR,CAEtBS,IAAC,CAAC,EACEtC,MAAI,IACPuC,UAAWV,EAAKW,QAAQC,kBACxB,OALY,OAARV,EAAQC,EAAAU,KAAAV,EAAAX,KAAG,EAOaU,EAAS/B,KAAI,OAA3C6B,EAAK1B,iBAAgB6B,EAAAU,KACrBb,EAAK3B,QAAU2B,EAAK1B,iBAAiBD,QAEjC2B,EAAK3B,UACPyC,aAAaC,QAAQ,eAAgBC,KAAKC,UAAU9C,OACpD6B,EAAKF,MAAM,WACXD,cAAcG,EAAKzB,cACpB,wBAAA4B,EAAAJ,OAAA,GAAAE,EAAA,IAjB0BhB,EAkB7B,I,QE/DAiC,UAAY,YACd,GFRW,WAA+C,OAAOC,EAA5B,KAAYC,MAAMD,IAAa,MACtE,GACsB,IESpB,EACA,KACA,WACA,MAIa,UAAAD,U","file":"f0b1c63.js","sourcesContent":["\n\nexport default {\n  props: [\"email\", \"id\"],\n  data() {\n    return {\n      subscription_id: null,\n      isValid: null,\n      subscriptionData: null,\n      APIinterval: null,\n      maxCounter: 0,\n      isEmailValid: null\n    };\n  },\n  watch: {\n    id() {\n      this.checkSubscription();\n    },\n    email() {\n      this.checkSubscription();\n    }\n  },\n  methods: {\n    async checkSubscription() {\n\n      if (!this.email && !this.id) {\n        return;\n      }\n\n      let data = {};\n      if (this.id) {\n        data = { subscriptionId: this.id };\n      } else {\n        data = { email: this.email };\n      }\n\n      await this.loadSubscription(data);\n\n      this.APIinterval = setInterval(() => {\n        /*asks be if subscription is valid*/\n        if (this.isValid || this.maxCounter > 20) {\n          clearInterval(this.APIinterval);\n\n          if (!this.isValid) {\n            this.$emit(\"isInvalid\");\n          }\n          return;\n        }\n        this.loadSubscription(data);\n        this.maxCounter++;\n      }, 3 * 1000);\n    },\n    async loadSubscription(data) {\n\n      console.log(\"Loading\", data);\n      const response = await this.$fire.functions.httpsCallable(\n        \"checksubscriberstatus\"\n      )({\n        ...data,\n        client_id: this.$config.paypalClientId\n      });\n\n      this.subscriptionData = await response.data;\n      this.isValid = this.subscriptionData.isValid;\n\n      if (this.isValid) {\n        localStorage.setItem(\"subscription\", JSON.stringify(data));\n        this.$emit(\"isValid\");\n        clearInterval(this.APIinterval);\n      }\n    }\n  }\n};\n","import mod from \"-!../node_modules/.pnpm/babel-loader@8.3.0_@babel+core@7.23.7_webpack@4.47.0/node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/.pnpm/@nuxt+components@2.2.1_consola@3.2.3/node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/.pnpm/vue-loader@15.11.1_babel-core@7.0.0-bridge.0_cache-loader@4.1.0_css-loader@5.2.7_lodash@4.17._plymz6q3yttqenf645wwiztxby/node_modules/vue-loader/lib/index.js??vue-loader-options!./SubscriptionChecker.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/.pnpm/babel-loader@8.3.0_@babel+core@7.23.7_webpack@4.47.0/node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/.pnpm/@nuxt+components@2.2.1_consola@3.2.3/node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/.pnpm/vue-loader@15.11.1_babel-core@7.0.0-bridge.0_cache-loader@4.1.0_css-loader@5.2.7_lodash@4.17._plymz6q3yttqenf645wwiztxby/node_modules/vue-loader/lib/index.js??vue-loader-options!./SubscriptionChecker.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SubscriptionChecker.vue?vue&type=template&id=5014d43a&scoped=true\"\nimport script from \"./SubscriptionChecker.vue?vue&type=script&lang=js\"\nexport * from \"./SubscriptionChecker.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/.pnpm/vue-loader@15.11.1_babel-core@7.0.0-bridge.0_cache-loader@4.1.0_css-loader@5.2.7_lodash@4.17._plymz6q3yttqenf645wwiztxby/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5014d43a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}